
divide:
    PUSH FP
    MOV FP, SP
    
    LOAD [FP-4]     // Load b
    PUSH 0
    EQ              // Compare b == 0
    JZ no_exception
    
    // Throw exception
    PUSH exception_handler
    JMP
    
no_exception:
    LOAD [FP-8]     // Load a
    LOAD [FP-4]     // Load b
    DIV             // Divide
    
    MOV SP, FP
    POP FP
    RET
